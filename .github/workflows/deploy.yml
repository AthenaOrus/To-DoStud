name: ðŸš€ Deploy to GitHub Pages

on:
  push:
    branches: [main]

jobs:
  build-and-deploy:
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout
      uses: actions/checkout@v4
      with:
        persist-credentials: false
    
    - name: Create deployment directory
      run: |
        echo "ðŸ“ Creating deployment files..."
        mkdir -p deploy
        
        cat > deploy/index.html << 'EOF'
        <!DOCTYPE html>
        <html>
        <head>
            <title>To-DoStud - DevOps Project</title>
            <style>
                body { font-family: Arial; padding: 40px; text-align: center; }
                .success { color: green; font-size: 24px; }
            </style>
        </head>
        <body>
            <h1>ðŸš€ To-DoStud DÃ©ployÃ© !</h1>
            <p class="success">âœ… DÃ©ploiement Continuous Delivery (CD) rÃ©ussi</p>
            <p>Ce site est dÃ©ployÃ© automatiquement via GitHub Actions</p>
            <p><strong>Projet DevOps CI/CD complet :</strong></p>
            <ul style="list-style: none; padding: 0;">
                <li>âœ… CI : Tests automatisÃ©s</li>
                <li>âœ… Docker : Build automatique</li>
                <li>âœ… CD : DÃ©ploiement automatique</li>
            </ul>
        </body>
        </html>
        EOF
        
        echo "âœ… HTML file created"
    
    - name: Deploy to GitHub Pages
      uses: JamesIves/github-pages-deploy-action@v4
      with:
        branch: gh-pages
        folder: deploy
        clean: true