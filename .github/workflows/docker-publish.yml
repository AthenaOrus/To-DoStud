name: Docker Build and Push

on:
  push:
    branches: [dev, main]
  pull_request:
    branches: [main]

jobs:
  docker:
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout repository
      uses: actions/checkout@v4
    
    - name: Set up Docker Buildx
      uses: docker/setup-buildx-action@v3
    
    - name: Build Docker image
      run: |
        echo "ðŸ”¨ Building Docker image..."
        docker build -t todo-stud:latest .
        echo "âœ… Docker image built successfully"
    
    - name: Show Docker images
      run: |
        echo "ðŸ“¦ Listing Docker images:"
        docker images
    
    - name: Test Docker image
      run: |
        echo "ðŸ§ª Testing Docker image..."
        docker run --rm todo-stud:latest node -e "console.log('Docker test passed!')"
    
    - name: Success message
      run: |
        echo "ðŸŽ‰ Docker workflow completed!"
        echo "To push to Docker Hub:"
        echo "1. Add DOCKER_USERNAME and DOCKER_PASSWORD secrets"
        echo "2. Add login and push steps"